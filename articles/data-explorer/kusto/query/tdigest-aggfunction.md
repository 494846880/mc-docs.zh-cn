---
title: tdigest()（聚合函数）- Azure 数据资源管理器
description: 本文介绍 Azure 数据资源管理器中的 tdigest()（聚合函数）。
services: data-explorer
author: orspod
ms.author: v-tawe
ms.reviewer: alexans
ms.service: data-explorer
ms.topic: reference
origin.date: 12/10/2019
ms.date: 09/30/2020
ms.openlocfilehash: 220c430f2f18230852dd152e7370da3b9d795454
ms.sourcegitcommit: 93309cd649b17b3312b3b52cd9ad1de6f3542beb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/30/2020
ms.locfileid: "93103990"
---
# <a name="tdigest-aggregation-function"></a>tdigest()（聚合函数）

计算整个组中 [`percentiles()`](percentiles-aggfunction.md) 的中间结果。

> [!NOTE]
> 只能在 [summarize](summarizeoperator.md) 内的聚合上下文中使用。

有关详细信息，请参阅[基础算法 (T-Digest) 和预估误差](percentiles-aggfunction.md#estimation-error-in-percentiles)。

## <a name="syntax"></a>语法

`summarize` `tdigest`( *`Expr`* [`,` *`WeightExpr`* ])

## <a name="arguments"></a>参数

* Expr：用于聚合计算的表达式。
* WeightExpr：表达式，用作进行聚合计算的值的权重。

    
## <a name="returns"></a>返回

组中 `*Expr*` 的加权百分位数的中间结果。
 
 
**提示**

* 使用聚合函数 [tdigest_merge()](tdigest-merge-aggfunction.md) 将 `tdigest` 的输出再次合并到另一个组中。

* 使用函数 [percentile_tdigest()](percentile-tdigestfunction.md) 计算 `tdigest` 结果的百分位数/percentilew。

## <a name="examples"></a>示例

<!-- csl: https://help.kusto.chinacloudapi.cn:443/Samples -->
```kusto
StormEvents
| summarize tdigest(DamageProperty) by State
```

|状态|tdigest_DamageProperty|
|---|---|
|大西洋南部|[[5],[0],[193]]|
|佛罗里达州|[[5],[250,10,600000,5000,375000,15000000,20000,6000000,0,110000,150000,500,12000,30000,15000,46000000,7000000,6200000,200000,40000,8000,52000000,62000000,1200000,130000,1500000,4000000,7000,250000,875000,3000,100000,10600000,300000,1000000,25000,75000,2000,60000,10000,170000,350000,50000,1000,16000,80000,2500,400000],[9,1,1,22,1,1,9,1,842,1,3,7,2,4,7,1,1,1,2,5,3,3,1,1,1,1,2,2,1,1,9,7,1,1,2,5,2,9,2,27,1,1,7,27,1,1,1,1]]|
|佐治亚州|[[5],[468,209,300000,3000,250000,775000,14000,500000,0,75000,4500000,500,6928,22767,9714,800000,700000,600000,150000,25000,5000,1600000,1250000,2700000,1500000,2250000,400000,4000,175000,325000,2500,73750,750000,1400000,350000,28000000,39000,1500,35000,6455,140000,225000,30000,1000,110000000,21700000,2000,275000,200000,100000,1000000,2600000,370000,2100000,355000,117500,50000,20100,10000],[11,11,4,53,21,1,6,10,1317,8,1,56,8,6,7,1,1,1,14,29,69,1,2,1,1,1,3,14,5,1,3,4,4,1,4,1,5,14,3,5,2,1,9,96,1,1,72,1,10,17,3,1,1,1,1,2,21,4,31]]|
|密西西比州|[[5],[267,55,90000,3000,75000,300000,11167,160000,0,32000,40000,1000,7000,13000,8000,400000,200000,180000,50000,15000,5000,700000,500000,120000,650000,1000000,150000,4000,60000,100000,2500,30000,250000,600000,110000,12000,20000,1500,17000,6000,45000,70000,15250,1219,10000,25000,2000,80000,65000,35000,450000,1200000,130000,750000],[3,2,6,21,1,4,6,1,741,4,13,44,8,2,8,1,5,1,23,21,32,1,3,1,1,1,5,18,17,4,1,14,2,4,4,16,13,10,4,9,2,10,4,8,31,17,51,13,1,1,1,2,1,1]]|
|AMERICAN SAMOA|[[5],[0,250000],[15,1]]|
